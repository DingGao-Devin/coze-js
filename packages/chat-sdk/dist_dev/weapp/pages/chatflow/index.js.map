{"version":3,"file":"pages/chatflow/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACdA;AACA","sources":["webpack://@coze/chat-sdk/./src/pages/chatflow/index.tsx?251c","webpack://@coze/chat-sdk/._src_pages_chatflow_index.tsx","webpack://@coze/chat-sdk/._src_pages_chatflow_index.module.less"],"sourcesContent":["import _objectSpread from \"/Users/bytedance/Documents/code/coze/coze_mini_chat/node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/bytedance/Documents/code/coze/coze_mini_chat/node_modules/.pnpm/@babel+runtime@7.26.9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { View } from \"@tarojs/components\";\nimport { useEffect, useState } from \"react\";\nimport styles from \"./index.module.less\";\nimport { ChatFlowFramework } from \"@/chatflow\";\nimport { ChatSlot, useChatInfoStore } from \"@/libs\";\nimport UserIcon from \"@/libs/ui-kit/assets/imgs/coze-logo.png\";\nimport { useSendMessage } from \"@/libs/services\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var cnBotInfo = {\n  appId: \"7472176199100645402\",\n  workflowId: \"7472209247696551955\",\n  apiBaseUrl: \"https://api.coze.cn\",\n  conversationName: \"Test3\",\n  tokenType: \"external\",\n  token: \"pat_CCit2upKNLH778OtaoAspgyYYh5clTvgYuAqR4rBQgXuzbCwmY4QjQWdFiGBvGlX\"\n};\nexport var enBotInfo = {\n  appId: \"7329529575539572743\",\n  apiBaseUrl: \"https://api.coze.com\",\n  token: \"pat_JKnvkrN7bzTvHHf9bYq8bnJPFIH4TFir9M4P7kMCBYhgwtHP8jf4hadNetEXXOU7\"\n};\nexport var boeBotInfo = {\n  appId: \"7440555625941631020\",\n  workflowId: \"7441166757690064940\",\n  apiBaseUrl: \"https://api-bot-boe.bytedance.net\",\n  tokenType: \"internal\",\n  conversationName: \"Chatflow3\",\n  token: \"pat_nDifwbBHwz4PSIIvCAtBH9DSmr8RmymxPnhW0cuVrVUlcRwt9wPTnTVyos2bT4NA\"\n};\nvar botInfo = cnBotInfo;\n\n// 美东： https://sf16-va.tiktokcdn.com/obj/eden-va2/rkzild_lgvj/ljhwZthlaukjlkulzlp/assets/imgs/chatflow-logo.png\n// SG:   https://sf16-sg.tiktokcdn.com/obj/eden-sg/rkzild_lgvj/ljhwZthlaukjlkulzlp/assets/imgs/chatflow-logo.png\n// CN:   https://lf3-static.bytednsdoc.com/obj/eden-cn/rkzild_lgvj/ljhwZthlaukjlkulzlp/assets/imgs/chatflow-logo.png\nexport default function Index() {\n  var _useState = useState({\n      id: botInfo.workflowId,\n      parameters: {}\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    workflow = _useState2[0],\n    setWorkflow = _useState2[1];\n  var auth = {\n    type: botInfo.tokenType || \"internal\",\n    token: botInfo.token,\n    refreshToken: function refreshToken() {\n      return botInfo.token;\n    }\n  };\n  var setting = {\n    // apiBaseUrl: \"https://api.coze.cn\",\n    apiBaseUrl: botInfo.apiBaseUrl,\n    //cdnBaseUrlPath:\n    //  \"https://sf16-va.tiktokcdn.com/obj/eden-va2/rkzild_lgvj/ljhwZthlaukjlkulzlp\",\n    logLevel: \"debug\",\n    requestHeader: {\n      \"x-tt-env\": \"ppe_chatflow_role\",\n      \"x-use-ppe\": \"1\"\n    }\n  };\n  var _useState3 = useState({\n      // prologue:\n      // \"[stetsa](https://www.baidu.com)\\n\\n![45379212846b4c68b4286e5189a22b70.jpeg](https://www.coze.com/s/Zs8AutFQd/)\\n\\n尊敬的{{user_name}}，你好\",\n      // prologue: \"123123\",\n      suggestions: [\"asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf \"]\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    onBoarding = _useState4[0],\n    setOnBoarding = _useState4[1];\n  var _useState5 = useState({\n      id: \"ID1234567890\",\n      name: \"GaoTest\",\n      avatar: UserIcon\n      //\"https://p6-passport.byteacctimg.com/img/user-avatar/04628af005e4ca4cecc9f106b4162b3a~300x300.image\",\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userInfo = _useState6[0],\n    setUserInfo = _useState6[1];\n  var _useState7 = useState({\n      id: botInfo.appId,\n      type: \"app\",\n      conversationName: botInfo.conversationName || \"asf\",\n      name: \"https://www.coze.cn/space/7321567613585424403/project-ide/7459982518834446351/workflow/7459756038184026112\",\n      mode: \"draft\",\n      //mode: \"websdk\",\n      //iconUrl:\n      //  \"https://p6-passport.byteacctimg.com/img/user-avatar/04628af005e4ca4cecc9f106b4162b3a~300x300.image\",\n      onBoarding: onBoarding\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    project = _useState8[0],\n    setProject = _useState8[1];\n  var _useState9 = useState({\n      layout: \"pc\",\n      isDisabled: false,\n      isMiniCustomHeader: false,\n      clearContext: {\n        isNeed: true\n      },\n      clearMessage: {\n        isNeed: true\n      },\n      uploadBtn: {\n        isNeed: true\n      },\n      header: {\n        isNeed: true,\n        //icon: \"https://p6-passport.byteacctimg.com/img/user-avatar/04628af005e4ca4cecc9f106b4162b3a~300x300.image\",\n        title: \"Test\",\n        renderRightSlot: function renderRightSlot() {\n          return /*#__PURE__*/_jsx(\"div\", {\n            children: \"asdf\"\n          });\n        }\n      },\n      footer: {\n        isNeed: true\n        /*expressionText: \"Ai Test{{baidu}}\",\n        linkvars: {\n          baidu: {\n            text: \"Baidu\",\n            link: \"https://www.baidu.com\",\n          },\n        },*/\n      },\n      renderLoading: function renderLoading() {\n        return /*#__PURE__*/_jsx(View, {\n          className: styles.loading,\n          children: \"Loading\"\n        });\n      },\n      input: {\n        placeholder: \"请输入你的s问题\",\n        isNeed: true,\n        isNeedTaskMessage: true,\n        isNeedAudio: true,\n        //defaultText: \"Chatflow DefaultText\",\n        renderChatInputTopSlot: function renderChatInputTopSlot() {\n          return /*#__PURE__*/_jsx(\"div\", {\n            children: \" Input Top Slot\"\n          });\n        }\n      }\n      /* bgInfo: {\n        imgUrl:\n          \"https://p6-bot-sign.byteimg.com/tos-cn-i-v4nquku3lp/12c18226f4ca4ee2899509a43144f9aa.png~tplv-v4nquku3lp-image.image?rk3s=50ccb0c5&x-expires=1798892047&x-signature=C0MJ64WRnlPdD7Yg4UOGpgiKanI%3D\",\n         themeColor: \"#322725\",\n      },*/\n      //renderLoading: () => <div>Loading</div>,\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    areaUi = _useState10[0],\n    setAreaUi = _useState10[1];\n  console.log(\"chatflow props:\", {\n    workflow: workflow,\n    project: project,\n    userInfo: userInfo,\n    areaUi: areaUi,\n    setting: setting,\n    auth: auth\n  });\n  console.log(\"chatflow test func\", {\n    setOnBoarding: setOnBoarding,\n    setUserInfo: setUserInfo,\n    setProject: setProject,\n    setAreaUi: setAreaUi,\n    setWorkflow: setWorkflow\n  });\n  return /*#__PURE__*/_jsx(View, {\n    className: styles.container,\n    onTouchStart: function onTouchStart(e) {\n      e.stopPropagation(), e.preventDefault();\n    },\n    onTouchMove: function onTouchMove(e) {\n      e.stopPropagation(), e.preventDefault();\n    },\n    children: /*#__PURE__*/_jsx(View, {\n      className: styles[\"chat-container\"],\n      children: /*#__PURE__*/_jsx(ChatFlowFramework, {\n        workflow: workflow,\n        project: _objectSpread(_objectSpread({}, project), {}, {\n          caller: \"CANVAS\",\n          onBoarding: onBoarding\n        }),\n        userInfo: userInfo,\n        areaUi: areaUi,\n        setting: setting,\n        auth: auth,\n        eventCallbacks: {\n          onGetChatFlowExecuteId: function onGetChatFlowExecuteId(executeId) {\n            console.log(\"onGetChatFlowExecuteId:\", executeId);\n          },\n          onImageClick: function onImageClick(extra) {\n            console.log(\"onImageClick:\", extra);\n          },\n          onThemeChange: function onThemeChange(type) {\n            console.log(\"onThemeChange\", type);\n          },\n          onInitSuccess: function onInitSuccess() {\n            console.log(\"onInitSuccess。。。。\");\n          },\n          message: {\n            afterMessageReceivedFinish: function afterMessageReceivedFinish(ck) {\n              console.log(\"afterMessageReceivedFinish:\", ck);\n            }\n          }\n        },\n        children: /*#__PURE__*/_jsx(ChatFlowNode, {})\n      })\n    })\n  });\n}\nvar ChatFlowNode = function ChatFlowNode() {\n  var _useSendMessage = useSendMessage(),\n    sendMessage = _useSendMessage.sendMessage;\n  var _useChatInfoStore = useChatInfoStore(function (store) {\n      return {\n        isLoading: store.isLoading,\n        error: store.error\n      };\n    }),\n    isLoading = _useChatInfoStore.isLoading,\n    error = _useChatInfoStore.error;\n  useEffect(function () {\n    if (isLoading === false && !error) {\n      return; /*\n              sendMessage({\n              type: RawMessageType.TEXT,\n              data: \"123\",\n              });*/\n    }\n  }, [isLoading, error]);\n  return /*#__PURE__*/_jsx(ChatSlot, {\n    className: styles.ChatSlot\n  });\n};","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/.pnpm/@tarojs+taro-loader@4.0.8_@swc+helpers@0.5.15_webpack@5.91.0_@swc+core@1.3.96_@swc+helpers@0.5.15__/node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/chatflow/index!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"Coze Chat\",\"enablePullDownRefresh\":false,\"navigationStyle\":\"custom\",\"disableScroll\":true};\n\n\n\nvar taroOption = createPageConfig(component, 'pages/chatflow/index', {root:{cn:[]}}, config || {})\nif (component && component.behaviors) {\n  taroOption.behaviors = (taroOption.behaviors || []).concat(component.behaviors)\n}\nvar inst = Page(taroOption)\n\n\n\nexport default component\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"index-module__container___CAHkZ\",\"chat-container\":\"index-module__chat-container___NS0A0\",\"chat-slot\":\"index-module__chat-slot___CB_uP\",\"loading\":\"index-module__loading___Vv36B\"};"],"names":[],"sourceRoot":""}